import{ah as u,av as l,aw as f,an as p,m as d,ax as S,B as v,ay as g,az as y,ap as m}from"./index-CPm5U5pJ.js";function w(e){return g()?(y(e),!0):!1}function I(){const e=new Set,t=o=>{e.delete(o)};return{on:o=>{e.add(o);const a=()=>t(o);return w(a),{off:a}},off:t,trigger:(...o)=>Promise.all(Array.from(e).map(a=>a(...o)))}}const s=new WeakMap,h=(e,t)=>{var r;const n=(r=u())==null?void 0:r.proxy;if(n==null)throw new Error("provideLocal must be called in setup");s.has(n)||s.set(n,Object.create(null));const o=s.get(n);o[e]=t,m(e,t)},j=(...e)=>{var t;const r=e[0],n=(t=u())==null?void 0:t.proxy;if(n==null)throw new Error("injectLocal must be called in setup");return s.has(n)&&r in s.get(n)?s.get(n)[r]:l(...e)};function P(e,t){const r=Symbol(e.name||"InjectionState"),n=void 0;return[(...c)=>{const i=e(...c);return h(r,i),i},()=>j(r,n)]}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const x=e=>typeof e<"u",b=()=>{};function L(...e){if(e.length!==1)return f(...e);const t=e[0];return typeof t=="function"?p(S(()=>({get:t,set:b}))):d(t)}function D(e,t,r){return v(e,(o,a,c)=>{o&&t(o,a,c)},{...r,once:!1})}export{I as a,P as c,x as i,L as t,D as w};
